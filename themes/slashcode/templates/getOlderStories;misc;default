__section__
default
__description__
Print older stories for older stories box

* cur_time = current time()
* stories = arrayref of story hashrefs
* yesterday = the value to put in the "yesterday's edition" link
* week_ago = the date from a week ago 
* start = where to start counting from in search.pl return values
* first_date = date of first story returned from getStoriesEssential
* last_date = date of last story returned from getStoriesEssential

Each story has the keys sid, section, title, time, commentcount,
day (w, m, d, h, min, ampm), secs (since unix epoch) and
link (which is a linkStory() value)

XXXSECTIONTOPICS the above key list is wrong at least for 'section' :)

__title__

__page__
misc
__lang__
en_US
__name__
getOlderStories
__template__
[% this_today = '';
   c = 0;
   max_older_stories = gSkin.artcount_max / 2 || 15;
   FOREACH story = stories;
   	day = "$story.day_of_week $story.month $story.day";
	IF this_today != day;
		this_today = day; %]
		<p><b><font size="4"><a href="[% gSkin.rootdir %]/index.pl?issue=[% story.issue %]">
		[%- IF cur_time && story.secs && cur_time-story.secs < 7*86400
		    # If the story is within the last week, show (and link) the day-of-week -%]
			[% story.day_of_week %]</a></font> [% story.month %] [% story.day %]
		[%- ELSE
		    # Otherwise, show the whole date, because just the day would confuse -%]
			[% story.month %] [% story.day %]</a></font>
		[%- END -%]
		</b></p>
	[%- END %]
	&middot;
	<A HREF="[% story.link.0 %]"[% IF story.link.2 %] TITLE="[% story.link.2 %]"[% END %]>[% story.link.1 %]</A>
	([% story.commentcount %])<BR>
	[% start = start + 1; c = c + 1; LAST IF c >= max_older_stories %]
[% END %]

<p align="right">

[% # only do this if we want to have an "Older Articles" link
   # pointing back in time into search.pl
   # (why wouldn't we??) %]

<b><a href="[% gSkin.rootdir %]/search.pl?start=[% start %]
	[%- IF gSkin.skid != constants.mainpage_skid %]&amp;section=[% gSkin.name; END -%]
">Older Articles</a></b>

[% # only do this if we want to have a yesterday/today/"June 1"
   # style next/previous day issue link
   # (why wouldn't we??) %]

<br><b>[% PROCESS next_prev_issue older_stories = 1 %]</b>

__seclev__
10000
__version__
$Id$
