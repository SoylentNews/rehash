__section__
default
__description__
You should describe stuff here.
__title__
Useless title to template
__page__
firehose
__lang__
en_US
__name__
list
__seclev__
10000
__template__
[% IF env.script_name == "/firehose.pl" || form.ssi %]
<script type="text/javascript">
  YAHOO.slashdot.App = function()
    {
      return {
          init: function()
            {
              var slashboxes_container = document.getElementById('slashboxes');
              var block_titles = YAHOO.util.Dom.getElementsByClassName('title', 'div', slashboxes_container);

              for ( i=0; i<block_titles.length; ++i)
                {
                  var inner_title = block_titles[i];
                  var sb = inner_title.parentNode;
                  // var inner_title = YAHOO.util.Dom.getElementsByClassName('title', 'div', sb)[0];
                  
                  if ( ! sb.id )
                    sb.id = inner_title.id + "-container";

                  var dd = new YAHOO.slashdot.SlashBox(sb.id, "slashboxes");
                  dd.setHandleElId(inner_title.id);
                  dd.setXConstraint(0,0);
                }
              // var t0 = new YAHOO.util.DDTarget("slashboxes", "slashboxes");
            }
        };
    } ();

  YAHOO.util.Event.addListener(window, "load", YAHOO.slashdot.App.firehose_calendar_init);
</script>
<div id="slashboxes">
[% UNLESS user.noboxes %]
  [% IF slashboxes;
    slashboxes %]
  [% END %]
[% END %]
</div>
<div id="message">
	<div class="content">
		<p>
		[% PROCESS rand_mesg %]
		</p>
	</div>
</div>
[% END %]
<div id="messagearea"></div>
[% IF !form.skipmenu %]
<div class="firemenu">
[% theupdatetime = Slash.timeCalc(Slash.db.getTime(), "%H:%M"); %]
[% refresh_text = "";
   IF !user.is_anon;
   	refresh_text = "<span style='font-size:60%'>(Last Refreshed <span id='local_last_update_time'>$theupdatetime</span><span id='gmt_update_time'></span> Currently <span id='pauseorplay'>Paused</span>)</span><span id='busy' class='hide'><img src='$constants.imagedir" _ "/spinner.gif'></span>";
   END;
%]
[% PROCESS titlebar title="Firehose Beta $refresh_text" %]
[% PROCESS autocomplete %]
<div class="submenu">
<div id="message_area">
</div>
	[% rss_options = { "fhfilter" => "filter", "orderdir" => "orderdir", "orderby" => "orderby", color => "color", "duration" => "duration" } %]
	[% rss_param_str = "" %]
	[% FOREACH param = rss_options.keys;
		rss_param_str = rss_param_str _ "&amp;=" _ param;
		rss_param_str = rss_param_str _ "=" _ Slash.strip_attribute(options.${rss_options.$param});
		
	END %]
	[% IF !user.is_anon %]
		[% PROCESS firehose_tabs tabs = options.tabs %]
		<div class="advpref"><a href="#" id="fh_adv_pref_toggle" onclick="firehose_toggle_advpref(); return false">Prefs</a> <a href="[% Slash.root2abs() %]/firehose.pl?op=rss&amp;content_type=rss[% rss_param_str %]&amp;logtoken=[% Slash.getPublicLogToken() | strip_paramattr %]" style="color:#fff;">RSS</a></div>
		[% PROCESS adv_pref_firehose options = options %]
	[% END %]
	[% IF user.is_anon %]
		<div id="fhlogin">
		[% PROCESS userlogin %]
		</div>
	[% ELSE %]
	<form action="[% gSkin.rootdir %]/firehose.pl" method="get" name="firehoseform">
		<fieldset>
			<legend>Firehose</legend>
			<label><input type="text" class="slashdot-tag-completer" name="fhfilter" value="[% options.fhfilter | strip_attribute %]" size="30" autocomplete="off" onfocus="attachCompleter(this,'[% id %]','[% user.is_admin && !user.firehose_usermode %]','firehose-filter', 0)" id="firehose-filter"></label>
<div id="colorsliderbg">
	<div id="colorsliderthumb"><img src="[% constants.imagedir %]/slidethumb.png" alt="Filter firehose to" id="fh_slider_img" title="Filter firehose to"></div>
</div>

			<input type="submit" value="Filter" onclick="firehose_set_options('fhfilter'); return false;">
			[% IF user.is_admin %]
			User mode?
			<input type="hidden" name="setusermode" value="1">
			<input type="checkbox" value="1" name="firehose_usermode" onchange="firehose_set_options('firehose_usermode', this.checked)" [% constants.markup_checked_attribute IF options.firehose_usermode || user.firehose_usermode %]> 
			[% END %]
		</fieldset>
	</form>
	[% END %]
[% IF !user.is_anon %]
[% PROCESS firehose_options %]
[% END %]
</div>
</div>
[% IF !user.is_admin || (user.is_admin && user.firehose_usermode ) %]
<p>
The Slashdot Firehose is a collaborative system designed to allow
users to assist our editors in the story selection process. Try
tagging and voting on the entries below, and by using the 'feedback'
menu by each entry. The hose can contain submissions, RSS Feeds,
bookmarks, journal entries and Slashdot stories. Please send your
feedback to hose@cmdrtaco.net but be forgiving of beta code!
</p>
[% END %]
[% END %]
<div id="firehoselist">
[% itemstext %]
[% page = page || "0" %]
</div>
[% PROCESS paginate options = options ulid = "fh-paginate" divid = "fh-pag-div" day = last_day num_items = itemnum fh_page = fh_page %]
<script type="text/javascript">
	firehose_startdate = '[% options.startdate.replace('-','') %]';
	firehose_issue = '[% options.issue %]';
	firehose_duration = '[% options.duration %]';
	[% IF fh_page == "console.pl" %]
		fh_pageval = 1;
	[% END %]

	var firehose_action_time = 0;
	var fh_color = '[% options.color || user.firehose_color || "indigo" %]';
	fh_colors = [
		[%- FOREACH color=colors -%]
			"[%- color -%]",
		[% END %]
	];
	var fh_colors_hash = new Array(0);
	for (var i=0; i< fh_colors.length; i++) {
		fh_colors_hash[fh_colors[i]] = i;
	}
	var fh_view_mode = '[% options.mode %]';
	var page = '[% page %]';
	fh_is_admin = [% IF user.is_admin && !user.firehose_usermode %]1[% ELSE %]0[% END %];
	var updateIntervalType = [% IF user.is_admin && !user.firehose_usermode %]1[% ELSE %]2[% END %];
	var inactivity_timeout = [% IF user.is_admin && !user.firehose_usermode %]10800[% ELSE %]3600[% END %];
	setFirehoseAction();
	var update_time = '[% refresh_options.maxtime %]';
[% IF refresh_options && refresh_options.maxtime %]
	var maxtime = '[% refresh_options.maxtime %]';
	var insert_new_at = '[% refresh_options.insert_new_at %]';
	[% UNLESS user.firehose_paused || !user.firehose_paused.defined %]
		firehose_play();
	[% END %]

fh_ticksize = 15;
firehose_slider_init();
firehose_calendar_init();



[% END %]
</script>

__version__
$Id$
